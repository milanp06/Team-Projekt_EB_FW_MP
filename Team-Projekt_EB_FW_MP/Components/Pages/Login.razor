@page "/"

@rendermode InteractiveServer
@inject MyCustomAuthStateProvider MyAuthProvider
@inject NavigationManager MyNavMgr

<div class="login-container">
    <div class="login-card text-center">
        <img src="images/logo.png" alt="Logo" class="login-logo mb-4" />

        <h1 class="mb-4">FriendsOfAward</h1>

        <div class="form-group">
            <label for="username">Benutzername</label>
            <input id="username" class="form-control form-control-lg" @bind="username" />
        </div>

        <div class="form-group">
            <label for="password">Passwort</label>
            <input id="password" type="password" class="form-control form-control-lg" @bind="password" />
        </div>

        <button class="btn btn-primary btn-lg w-100 btn-hover" @onclick="HandleLogin">Anmelden</button>

        <p style="color: red">@message</p>
    </div>
</div>

@code {
    string username = "Admin";
    string password = "P4ssw0rd";
    string message = "";

    void HandleLogin()
    {
        if (IsValidUser(username, password))
        {
            MyAuthProvider.Login(username);
            MyNavMgr.NavigateTo("/admin");
        }
        else
        {
            message = "Login fehlgeschlagen.";
        }
    }

    bool IsValidUser(string username, string password)
    {
        return DatenbankLib.Admin.CheckAdminLogin(username, password);
    }
}
